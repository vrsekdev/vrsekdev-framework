"use strict";!function(e,t){var o,a,n=!0;function r(e,t){var a=[],n=moment(e.start.toUTCString());return t||a.push("<span>"+n.format("HH:mm")+"</span> "),e.isPrivate?(a.push('<span class="bx bxs-lock-alt font-size-small align-middle"></span>'),a.push(" Private")):(e.isReadOnly?a.push('<span class="bx bx-block font-size-small align-middle"></span>'):e.recurrenceRule?a.push('<span class="bx bx-repeat font-size-small align-middle"></span>'):e.attendees.length?a.push('<span class="bx bxs-user font-size-small align-middle"></span>'):e.location&&a.push('<span class="bx bxs-map font-size-small align-middle"></span>'),a.push(" "+e.title)),a.join("")}function l(e){var t=$(e.target).closest('[role="menuitem"]')[0],a=g(t),n=o.getOptions(),e="";switch(a){case"toggle-daily":e="day";break;case"toggle-weekly":e="week";break;case"toggle-monthly":n.month.visibleWeeksCount=0,n.month.isAlways6Week=!1,e="month";break;case"toggle-weeks2":n.month.visibleWeeksCount=2,e="month";break;case"toggle-weeks3":n.month.visibleWeeksCount=3,e="month";break;case"toggle-narrow-weekend":n.month.narrowWeekend=!n.month.narrowWeekend,n.week.narrowWeekend=!n.week.narrowWeekend,e=o.getViewName(),t.querySelector("input").checked=n.month.narrowWeekend;break;case"toggle-start-day-1":n.month.startDayOfWeek=n.month.startDayOfWeek?0:1,n.week.startDayOfWeek=n.week.startDayOfWeek?0:1,e=o.getViewName(),t.querySelector("input").checked=n.month.startDayOfWeek;break;case"toggle-workweek":n.month.workweek=!n.month.workweek,n.week.workweek=!n.week.workweek,e=o.getViewName(),t.querySelector("input").checked=!n.month.workweek}o.setOptions(n,!0),o.changeView(e,!0),u(),m(),h()}function c(e){switch(g(e.target)){case"move-prev":o.prev();break;case"move-next":o.next();break;case"move-today":o.today();break;default:return}m(),h()}function s(e){var t=e.start?new Date(e.start.getTime()):new Date,e=e.end?new Date(e.end.getTime()):moment().add(1,"hours").toDate();n&&o.openCreationPopup({start:t,end:e})}function d(e){var t=e.target.value,a=e.target.checked,n=document.querySelector(".sidebar-calendars-item input"),o=Array.prototype.slice.call(document.querySelectorAll("#calendarList input")),e=!0;"all"===t?(e=a,o.forEach(function(e){var t=e.parentNode;e.checked=a,t.style.backgroundColor=a?t.style.borderColor:"transparent"}),CalendarList.forEach(function(e){e.checked=a})):(findCalendar(t).checked=a,e=o.every(function(e){return e.checked}),n.checked=!!e),i()}function i(){var e=Array.prototype.slice.call(document.querySelectorAll("#calendarList input"));CalendarList.forEach(function(e){o.toggleSchedules(e.id,!e.checked,!1)}),o.render(!0),e.forEach(function(e){var t=e.nextElementSibling;t.style.backgroundColor=e.checked?t.style.borderColor:"transparent"})}function u(){var e=document.getElementById("calendarTypeName"),t=document.getElementById("calendarTypeIcon"),a=o.getOptions(),n=o.getViewName(),a="day"===n?(n="Daily","bx bx-calendar-alt mr-25"):"week"===n?(n="Weekly","bx bx-calendar-event mr-25"):2===a.month.visibleWeeksCount?(n="2 weeks","bx bx-calendar-check mr-25"):3===a.month.visibleWeeksCount?(n="3 weeks","bx bx-calendar-check mr-25"):(n="Monthly","bx bx-calendar mr-25");e.innerHTML=n,t.className=a}function m(){var e=document.getElementById("renderRange"),t=o.getOptions(),a=o.getViewName(),n=[];"day"===a?n.push(moment(o.getDate().getTime()).format("YYYY-MM-DD")):"month"===a&&(!t.month.visibleWeeksCount||4<t.month.visibleWeeksCount)?n.push(moment(o.getDate().getTime()).format("YYYY-MM")):(n.push(moment(o.getDateRangeStart().getTime()).format("YYYY-MM-DD")),n.push("-"),n.push(moment(o.getDateRangeEnd().getTime()).format(" MM.DD"))),e.innerHTML=n.join("")}function h(){o.clear(),generateSchedule(o.getViewName(),o.getDateRangeStart(),o.getDateRangeEnd()),o.createSchedules(ScheduleList),i()}function g(e){return e.dataset?e.dataset.action:e.getAttribute("data-action")}(o=new t("#calendar",{defaultView:"month",useCreationPopup:n,useDetailPopup:!0,calendars:CalendarList,theme:{"common.border":"1px solid #DFE3E7","common.backgroundColor":"white","common.holiday.color":"#FF5B5C","common.saturday.color":"#304156","common.dayname.color":"#304156","month.dayname.borderLeft":"1px solid transparent","month.dayname.fontSize":"1rem","week.dayGridSchedule.borderRadius":"4px","week.timegridSchedule.borderRadius":"4px"},template:{milestone:function(e){return'<span class="bx bx-flag align-middle"></span> <span style="background-color: '+e.bgColor+'">'+e.title+"</span>"},allday:function(e){return r(e,!0)},time:function(e){return r(e,!1)}}})).on({clickSchedule:function(e){$(".tui-full-calendar-popup-top-line").css("background-color",e.calendar.color),$(".tui-full-calendar-calendar-dot").css("background-color",e.calendar.borderColor)},beforeCreateSchedule:function(e){!function(e){var t=e.calendar||findCalendar(e.calendarId),e={id:String(chance.guid()),title:e.title,isAllDay:e.isAllDay,start:e.start,end:e.end,category:e.isAllDay?"allday":"time",dueDateClass:"",color:t.color,bgColor:t.bgColor,dragBgColor:t.bgColor,borderColor:t.borderColor,location:e.location,raw:{class:e.raw.class},state:e.state};t&&(e.calendarId=t.id,e.color=t.color,e.bgColor=t.bgColor,e.borderColor=t.borderColor);o.createSchedules([e]),i()}(e)},beforeUpdateSchedule:function(e){e.schedule.start=e.start,e.schedule.end=e.end,o.updateSchedule(e.schedule.id,e.schedule.calendarId,e.schedule)},beforeDeleteSchedule:function(e){console.log("beforeDeleteSchedule",e),o.deleteSchedule(e.schedule.id,e.schedule.calendarId)},clickTimezonesCollapseBtn:function(e){return e?o.setTheme({"week.daygridLeft.width":"77px","week.timegridLeft.width":"77px"}):o.setTheme({"week.daygridLeft.width":"60px","week.timegridLeft.width":"60px"}),!0}}),a=tui.util.throttle(function(){o.render()},50),e.cal=o,u(),m(),h(),$(".menu-navigation").on("click",c),$('.dropdown-menu [role="menuitem"]').on("click",l),$(".sidebar-calendars").on("change",d),$(".sidebar-new-schedule-btn").on("click",s),e.addEventListener("resize",a)}(window,tui.Calendar),function(){var e=document.getElementById("calendarList"),t=[];CalendarList.forEach(function(e){t.push('<div class="sidebar-calendars-item"><label><input type="checkbox" class="tui-full-calendar-checkbox-round" value="'+e.id+'" checked><span style="border-color: '+e.borderColor+"; background-color: "+e.borderColor+';"></span><span>'+e.name+"</span></label></div>")}),e.innerHTML=t.join("\n")}(),$(document).ready(function(){0<$(".sidebar").length&&new PerfectScrollbar(".sidebar",{wheelPropagation:!1}),$(".sidebar-toggle-btn").on("click",function(){$(".sidebar").toggleClass("show"),$(".app-content-overlay").toggleClass("show")}),$(".app-content-overlay, .sidebar-new-schedule-btn").on("click",function(){$(".sidebar").removeClass("show"),$(".app-content-overlay").removeClass("show")})}),$(window).on("resize",function(){$(window).width()<991&&($(".sidebar").removeClass("show"),$(".app-content-overlay").removeClass("show"))});